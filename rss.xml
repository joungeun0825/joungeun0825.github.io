<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[RSS Feed of mythofsummer]]></title><description><![CDATA[Hello :) I'm joungeun. backend developer.]]></description><link>https://joungeun0825.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Thu, 10 Oct 2024 14:48:14 GMT</lastBuildDate><item><title><![CDATA[JPA mapping]]></title><description><![CDATA[클래스랑 테이블을 맵핑하려면 @Entity가 붙어야 JPA가 해당 클래스를 관리함 스펙상 클래스에 기본 생성자 필수(파라미터가 없는 public or protected 생성자)
final 클래스, enum, interface, inner…]]></description><link>https://joungeun0825.github.io/jpa2/</link><guid isPermaLink="false">https://joungeun0825.github.io/jpa2/</guid><pubDate>Thu, 10 Oct 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;클래스랑 테이블을 맵핑하려면 @Entity가 붙어야 JPA가 해당 클래스를 관리함&lt;/p&gt;
&lt;p&gt;스펙상 클래스에 기본 생성자 필수(파라미터가 없는 public or protected 생성자)
final 클래스, enum, interface, inner 클래스는 사용 불가
db에 저장할 필드에는 final 사용하면 안됨&lt;/p&gt;
&lt;p&gt;jpa에서는 애플리케이션 로딩 시점에 db테이블 생성 기능도 줌.
이렇게 생성된 DDL은 개발 장비에서만 사용, 운영서버에서는 사용하지 않거나 적절히 다듬은 후 사용해야 함.&lt;/p&gt;
&lt;p&gt;hibernate.hbm2ddl.auto의 value를 create로 만들면 기존 테이블을 지우고 테이블을 다시 만듦.
value에는 create-drop, update, validate 등등 있음
개발 초기 단계에는 create or update
테스트 서버는 update or validate
스테이징 운영 서버는 validate or none을 사용.&lt;/p&gt;
&lt;p&gt;@column에는 unique나 length, nullable도 설정해줄 수 있음&lt;/p&gt;
&lt;p&gt;@Enumerated 하면 db에는 없는 enum 타입을 맵핑할 수 있음&lt;/p&gt;
&lt;p&gt;@Temporal 자바에 날짜 시간 날짜시간 중에 어떤거 사용할지&lt;/p&gt;
&lt;p&gt;@Lob 데이터베이스에 varchar를 넘어서는 큰 콘텐츠&lt;/p&gt;
&lt;p&gt;name에 @Column에는 unique 잘 안씀 클래스 전체에 @Table(uniqueConstraints=)이런식으로 줘야됨&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@Enumerated(EnumType.STRING)&lt;/code&gt; 이나 &lt;code class=&quot;language-text&quot;&gt;EnumType.ORDINAL&lt;/code&gt;로 사용할 수 있음.
ordinal은 숫자로 구분 string은 string으로 구분 ordinal은 사용하지 않는 걸 추천&lt;/p&gt;
&lt;h2 id=&quot;기본키-매핑&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B8%B0%EB%B3%B8%ED%82%A4-%EB%A7%A4%ED%95%91&quot; aria-label=&quot;기본키 매핑 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;기본키 매핑&lt;/h2&gt;
&lt;p&gt;직접 할당: @Id, 값 자동 할당: &lt;code class=&quot;language-text&quot;&gt;@GeneratedValue(strategy=GenerationType.AUTO)&lt;/code&gt;로 auto는 db 방언에 따라 자동으로, identity는 데이터베이스에 위임,
sequence는 sequence 오브젝트를 만들어서 값을 generate&lt;/p&gt;
&lt;p&gt;identity의 전략은 id에 값을 넣으면 안되고 db에 insert를 해줘야 됨, null로 insert 쿼리 날아오면 그 때 db에서 값 세팅해줌&lt;/p&gt;
&lt;p&gt;id값을 알 수 있는 시점은 db에 들어가봐야 함.&lt;/p&gt;
&lt;p&gt;영속성 컨텍스트에서 관리되려면 무조건 pk값이 있어야 함. 근데 pk 값은 db에 들어가봐야지 알 수 있음.&lt;/p&gt;
&lt;p&gt;영속 상태가 되었다는 건 1차캐시에 id값이 pk값임. db에 넣기 전까지 pk값을 모름
jpa는 그래서 1차캐시에 넣을 수 있는 방법이 없음. 그래서 identity 전략에서만 em.persist 호출한 시점에 바로 insert 쿼리 날려버림.(커밋하면 날려버리는게 아님) 그리고 db에서 id 읽어와서 영속성컨텍스트를 사용함.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JPA에서 객체 변경 시 save() 호출이 필요할까? - 영속성 컨텍스트의 힘]]></title><description><![CDATA[JPA를 사용해 객체 간 관계를 설정하는 부분을 구현하다가 객체 변경 시 save() 메서드를 호출해야 하는지에 대한 의문이 들었습니다. 결론부터 말하자면 호출하지 않아도 됩니다. 이게 다 영속성 컨텍스트의 변경 감지(dirty checking…]]></description><link>https://joungeun0825.github.io/jpa1/</link><guid isPermaLink="false">https://joungeun0825.github.io/jpa1/</guid><pubDate>Fri, 04 Oct 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;JPA를 사용해 객체 간 관계를 설정하는 부분을 구현하다가 &lt;strong&gt;객체 변경 시 save() 메서드를 호출해야 하는지&lt;/strong&gt;에 대한 의문이 들었습니다. 결론부터 말하자면 &lt;strong&gt;호출하지 않아도 됩니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;이게 다 영속성 컨텍스트의 &lt;strong&gt;변경 감지(dirty checking)&lt;/strong&gt; 특성 덕분입니다. 이번 글에서는 이러한 영속성 컨텍스트의 장점들을 알아보겠습니다.&lt;/p&gt;
&lt;h2 id=&quot;영속성-컨텍스트란&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%9E%80&quot; aria-label=&quot;영속성 컨텍스트란 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;영속성 컨텍스트란?&lt;/h2&gt;
&lt;p&gt;영속성 컨텍스트는 엔티티를 영구적으로 저장하는 논리적인 환경입니다. 쉽게 말해, 애플리케이션과 DB 사이의 중간 계층 역할을 하죠. 엔티티 매니저(Entity Manager)가 영속성 컨텍스트를 관리하며, 이를 통해 엔티티 상태를 추적하고 관리합니다.&lt;/p&gt;
&lt;p&gt;일반적으로 EntityManager.persist() 메서드를 호출하면 객체가 DB에 저장된다고 생각할 수 있지만, 실제로는 영속성 컨텍스트에서 관리되기 시작한 것입니다. 실제 DB에 쿼리가 날아가는 시점은 트랜잭션이 커밋될 때입니다.&lt;/p&gt;
&lt;h2 id=&quot;영속성-컨텍스트의-주요-특성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%EC%A3%BC%EC%9A%94-%ED%8A%B9%EC%84%B1&quot; aria-label=&quot;영속성 컨텍스트의 주요 특성 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;영속성 컨텍스트의 주요 특성&lt;/h2&gt;
&lt;p&gt;영속성 컨텍스트의 주요 특성 몇 가지를 알아보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;변경-감지-Dirty-Checking&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B3%80%EA%B2%BD-%EA%B0%90%EC%A7%80-Dirty-Checking&quot; aria-label=&quot;변경 감지 Dirty Checking permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;변경 감지 (Dirty Checking)&lt;/h3&gt;
&lt;p&gt;앞에서 말했던 변경 감지입니다. JPA의 핵심 기능 중 하나인 변경 감지는 영속성 컨텍스트가 관리하는 엔티티의 변경사항을 자동으로 감지합니다. 트랜잭션 커밋 시점에 JPA는 영속성 컨텍스트에 있는 엔티티와 &lt;strong&gt;스냅샷(최초 영속 상태의 엔티티 상태)&lt;/strong&gt;을 비교하여 변경된 부분이 있으면 업데이트 쿼리를 쓰기 지연 sql 저장소에 넣고, DB에 반영하고 커밋합니다. &lt;strong&gt;이를 통해 객체의 변경 사항을 별도로 save() 호출 없이도 처리할 수 있습니다.&lt;/strong&gt;
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/8d91fa83f1f2e85b4d5f34c6833e8336/84a58/image-1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 61.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABgElEQVR42m2TW6+CQAyE+f8/jBeeNAYFAa+IXBS8iyHUfE1KjieQNLuw7XRmujiPx0PqupbL5SLX61XyPJf1ei2bzUZ2u51st1tdyeGcPPZt28rY45B0u9004fP5SFVVslqtFDRNU91HUSRN02je+/1W4OfzqQB93/8C3u93Tc6yTIv3+70cj0c5nU7KtixLZTWfzwcFNH29XuMMoZ8kiQIBejgcdIUdURTFwJRGBE1gOsqQ4iAIZLlcCmyRgq/II/gGAIwBZ09TVBlw13WaS51jBQDGcSxhGMpisVAmSOUceXjMimwkm8eAn89n/Ua+AzLdkM4hEyXZpAMAMywhDxYUQoIavCWPPVjKEDZ0831fpVHsed7AdDKZiOu6mmNDtOtFMANY0lwBzXg6wQCWyOcuAo7H0+lU97CAIWF+M5gfDwEk6Mq7ATJZ9rPZTBnzzrmB2ZT/Tlo9NI/MJ1ZjCGv+FmQh3zz/f7ENWBkyANgBDACFvNu9s2+sFvxVYxf7C74ViVaayb/RAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 1&apos; title=&apos;&apos; src=&apos;/static/8d91fa83f1f2e85b4d5f34c6833e8336/ca1dc/image-1.png&apos; srcset=&apos;/static/8d91fa83f1f2e85b4d5f34c6833e8336/e7570/image-1.png 170w,
/static/8d91fa83f1f2e85b4d5f34c6833e8336/f46e7/image-1.png 340w,
/static/8d91fa83f1f2e85b4d5f34c6833e8336/ca1dc/image-1.png 680w,
/static/8d91fa83f1f2e85b4d5f34c6833e8336/84a58/image-1.png 972w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;1차-캐시&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1%EC%B0%A8-%EC%BA%90%EC%8B%9C&quot; aria-label=&quot;1차 캐시 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;1차 캐시&lt;/h3&gt;
&lt;p&gt;영속성 컨텍스트는 1차 캐시를 가지고 있습니다. 엔티티를 영속화하면 DB에 바로 저장되는 것이 아니라, 먼저 1차 캐시에 저장됩니다. 이후 같은 엔티티를 조회할 때는 DB가 아닌 캐시에서 바로 조회하게 되어 성능을 높일 수 있습니다.
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/389d6e8c4535f17a8b49481135e02460/b0f6f/image-2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 48.8235294117647%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABLUlEQVR42oWSi66CQAxE/f//4hcAhUAwvF8i4Y3am9NkiVGTazJp122nM1tO8vF7PB7Stq3cbjdF0zSSpqkkSaLxPa+qSmu6rpOyLGXbNjl9Eq7rqoTzPCvIbdtWXC4X8TxPHMeR8/msJKaurmtZluWbkCmQTNMk4zhqZAjF5IbAYBiG34Sv1+snIQ1YwiYWUZZlmVq+3+/fhBA9n8+DEDW8i1FAXhSF2jRvF4ahWJYlURQdtg9CirkAcRyrOpooADTzv+/7etf3vdYywCwGNwfhvu/HG7FhLDAVOxRdr1dVxmDO5Nxz5gv4UpjnuU5HCTmEbNN1XQmCQFWggGcBDDLDAaQQEpWQApqYyEJQTA54fGPdAEXYNGeIEEH9seX3pRCNFRqJ/wEyRPFh/wGpTPeLxncs1wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 2&apos; title=&apos;&apos; src=&apos;/static/389d6e8c4535f17a8b49481135e02460/ca1dc/image-2.png&apos; srcset=&apos;/static/389d6e8c4535f17a8b49481135e02460/e7570/image-2.png 170w,
/static/389d6e8c4535f17a8b49481135e02460/f46e7/image-2.png 340w,
/static/389d6e8c4535f17a8b49481135e02460/ca1dc/image-2.png 680w,
/static/389d6e8c4535f17a8b49481135e02460/02d09/image-2.png 1020w,
/static/389d6e8c4535f17a8b49481135e02460/b0f6f/image-2.png 1042w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;동일성-보장&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8F%99%EC%9D%BC%EC%84%B1-%EB%B3%B4%EC%9E%A5&quot; aria-label=&quot;동일성 보장 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;동일성 보장&lt;/h3&gt;
&lt;p&gt;영속성 컨텍스트는 동일성을 보장합니다. 동일한 트랜잭션 내에서 같은 엔티티를 조회하면, == 비교로도 동일한 객체임을 확인할 수 있습니다. 즉, 동일한 엔티티는 트랜잭션 내에서 같은 인스턴스로 관리됩니다.
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e0fcb1b3054677b88f545a1525bf58bc/f6540/image-3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 18.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABJ0AAASdAHeZh94AAAA6klEQVR42j2OS4+CQBCE+f//aT2sBxMxAXZ1gECQpyiPGXAGEk/fDhz2UOnuSlV1OWEYUpUVfd+jlKIoCpIkwfM8hBCEoeB2u1E3zT+flyWf+Y1Jc0ySs9Ytc/tkGCXO+XwmjiJrqPfQzfx7vfJ9POK6LheL0+lEkqb8BAGHwxdXEfLRBu0LtCdY0xLZPHjYUGdrNc8zxhiWZdl3pSbGcbT7tN9Syn1u2HilJOu6skwTi9WuWu/eLcNJ7ec4jsmyjPx+x/d9Agvf84ksv7UehoG6qnh1nQ1aeD4b2rZGzZJ+7ND6bXUvtNH8Ab8XJQqFfGrDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 3&apos; title=&apos;&apos; src=&apos;/static/e0fcb1b3054677b88f545a1525bf58bc/ca1dc/image-3.png&apos; srcset=&apos;/static/e0fcb1b3054677b88f545a1525bf58bc/e7570/image-3.png 170w,
/static/e0fcb1b3054677b88f545a1525bf58bc/f46e7/image-3.png 340w,
/static/e0fcb1b3054677b88f545a1525bf58bc/ca1dc/image-3.png 680w,
/static/e0fcb1b3054677b88f545a1525bf58bc/02d09/image-3.png 1020w,
/static/e0fcb1b3054677b88f545a1525bf58bc/f6540/image-3.png 1063w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;트랜잭션을-지원하는-쓰기-지연&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%84-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-%EC%93%B0%EA%B8%B0-%EC%A7%80%EC%97%B0&quot; aria-label=&quot;트랜잭션을 지원하는 쓰기 지연 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;트랜잭션을 지원하는 쓰기 지연&lt;/h3&gt;
&lt;p&gt;엔티티를 여러 번 저장할 때마다 DB에 쿼리가 바로 실행되지 않습니다. 영속성 컨텍스트에 저장된 SQL 쿼리들은 쓰기 지연 SQL 저장소에 모아두고, 트랜잭션 커밋 시 한꺼번에 DB로 전송됩니다. 이 덕분에 성능이 향상됩니다.
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/df09bb3c40bc7f7a726d648b09ba0f5f/0ae55/image-4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 47.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAAB0ElEQVR42mVS227iUAzM/38Q7ENZ8YCaRYQEQiDkfifkAgVUAmQrTW3vtup2Hyw70fF4PGMljCJs7A1WKxOO4yIMA+z3e+RZBtd14fs+XM+Ds90iSRLY9Nbe2LAsC0EQoMhznM9nXCi66xXKfK5jvV5D02YUGra2TeArAZtOp1LPZjOYpgnP82EYBp5VFfO5Bl3XEYQhiqJAmqQ4nc5Q+Cez4Mmu48AhIItA4jhGmiZo24aY+FhbJqKIm3PaIkTbNKirCo/HneKB+/2O2+0GpW1aHI9HvLycaMIJDT3kfLlc8Pb2G13XUVxxvb5K5uBGBuHoqL7dOvkngB4xMs0llsulrM6MVVppsTCwJd24qe/7T4C+f3zWH6y+hvJzNMKP4RCTyQTj8RiD4QCDwRCj0ZNomOeFmNS2LQ6HA+q6lsybsBnfQZWYXE7TFBXpwYwyqjNy2HM9Edul7PsBAWfY7UpyOpb/gVxD9T8gC7/fl8TggJYm8+Po7xBuYCb8pqZclqUM2+12ckLf1xXAX6QXr8tnYxgLOZMnWld9VuXW2G12l5mZpk7aalI7zgZVXf4xpvtiCq/Kk1mjSvRphQF/s/vsNpvCTew0x4err1L/y/Adqh7eO/zX97IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 4&apos; title=&apos;&apos; src=&apos;/static/df09bb3c40bc7f7a726d648b09ba0f5f/ca1dc/image-4.png&apos; srcset=&apos;/static/df09bb3c40bc7f7a726d648b09ba0f5f/e7570/image-4.png 170w,
/static/df09bb3c40bc7f7a726d648b09ba0f5f/f46e7/image-4.png 340w,
/static/df09bb3c40bc7f7a726d648b09ba0f5f/ca1dc/image-4.png 680w,
/static/df09bb3c40bc7f7a726d648b09ba0f5f/02d09/image-4.png 1020w,
/static/df09bb3c40bc7f7a726d648b09ba0f5f/0ae55/image-4.png 1121w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/f25a44cf75045f27356577f08875e132/0bbcd/image-5.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 76.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABJ0AAASdAHeZh94AAABmUlEQVR42o2TC4+CQAyE+f+/z4SogIigoMjDByKoPb6eJXeXi0rSlF2605np4vR9L9drK23bDvkql0szxEVut5vwra5rOR6PGqvVSpbLpYRhKEmSyOFw0O/kx+MhPE5dVVpEcbJeix/4EiwWUhSFdF2nxTQj53ku+/1ec1mW2qQazrN3v9+/AeXFk6apzGYzbRjHsayHhjADkIZBEIzgKAL0JeD5fNYDBOAwaZpG93e7nQIi2Vhut9vXgHiKVDwlw5SAJYzJ0+lUwaiB9UeAMDqdTpoJ2CITljRgPQ6FxOJv/AQ0mZYZBu/GHmYfDQXALMs08IcMm81mowOyjGR7HLrgBR/SNJPo6ROSuq4fGWI894/wPE/rYctQfjFsB8oUcxApZVnoGil0BhyvaABDWLFPDfu88+2tZHw0wCiKVAWyATIw13V1H5YQYHDOfwOxwEOKCPPQGOGl7/sqnQbcVa7S26FQbBMFhEP6mz7v4mQy0UZI5m/5+GIDyppBAMAgaDCfz9XX8R6+A0Sq/X4E3gEAGHLxmAYG+AXFcX/miHlWsQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 5&apos; title=&apos;&apos; src=&apos;/static/f25a44cf75045f27356577f08875e132/ca1dc/image-5.png&apos; srcset=&apos;/static/f25a44cf75045f27356577f08875e132/e7570/image-5.png 170w,
/static/f25a44cf75045f27356577f08875e132/f46e7/image-5.png 340w,
/static/f25a44cf75045f27356577f08875e132/ca1dc/image-5.png 680w,
/static/f25a44cf75045f27356577f08875e132/0bbcd/image-5.png 820w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/6ae083166c5abce30b865dee156c5fe1/e9ffe/image-6.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 68.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAABvUlEQVR42nWT2W7CQAxF8/9/RF9pqyKBGgqEsIp9XwIJSUAUN8dloimiI5lkJvbxtcc4cl+3202fXqMhpdJHZiUpFotSKZelXK6I77ekVvuSQuFFXt/exXU/ZT6fSZykYi+Hn+v1mlsYhnI4HNT2+71EUSTH41GO2XkQ7GWxWMhut9Oz0+mUxXz/BZ7PZ1mv1+oEgIBGprLVakm32xXP86Tdbmdq5hJmcBLgB+zZctI0VYc4jtVQuNls8iQ8jSq+AYru4KdAFCL/crmoM1CSYNvtVg0QANpgEhiF+AVBoCJ4d3hxXVfLMn0hONSeBZIkiULxoxLO2RsgPrSmWq1qFQ7B0+k0LwsARiB7o0wvJjOgnGOmNfS7Xq//Au2STf8mk4meAeLs0YAul8sc7vt+DlcgG8pA+mw2k8FgIP1+X5rNpp7bYEo17WDMmF98qAo/B2WQV6uVAsmMA+MCkFbgyGUBM0DGiFaNx+NcHc8cSCBOZEZlp9PRBJQP0IwKQLO3F0oxBaIIINnoHWp7vZ4acILNZTEaBvz4t9U5BEiQbagajUYyHA61LNpAEmMk/3ewodvTb5dmz+SjcSHPgD8JICgZ2PZMcgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 6&apos; title=&apos;&apos; src=&apos;/static/6ae083166c5abce30b865dee156c5fe1/ca1dc/image-6.png&apos; srcset=&apos;/static/6ae083166c5abce30b865dee156c5fe1/e7570/image-6.png 170w,
/static/6ae083166c5abce30b865dee156c5fe1/f46e7/image-6.png 340w,
/static/6ae083166c5abce30b865dee156c5fe1/ca1dc/image-6.png 680w,
/static/6ae083166c5abce30b865dee156c5fe1/e9ffe/image-6.png 707w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;영속성-컨텍스트의-상태-DB와-동기화-하기---플러시Flush&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%EC%83%81%ED%83%9C-DB%EC%99%80-%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%98%EA%B8%B0---%ED%94%8C%EB%9F%AC%EC%8B%9CFlush&quot; aria-label=&quot;영속성 컨텍스트의 상태 DB와 동기화 하기   플러시Flush permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;영속성 컨텍스트의 상태 DB와 동기화 하기 - 플러시(Flush)&lt;/h2&gt;
&lt;p&gt;플러시(Flush)는 영속성 컨텍스트의 상태를 DB와 동기화하는 작업입니다.&lt;/p&gt;
&lt;h3 id=&quot;플러시가-발생할-때&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%94%8C%EB%9F%AC%EC%8B%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EB%95%8C&quot; aria-label=&quot;플러시가 발생할 때 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;플러시가 발생할 때&lt;/h3&gt;
&lt;p&gt;이때 플러시가 발생하면 다음과 같은 작업들이 이루어집니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. 변경 감지 (Dirty Checking)&lt;/strong&gt; : 영속성 컨텍스트에 저장된 엔티티들이 변경되었는지 확인합니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 수정된 엔티티를 쓰기 지연 SQL 저장소에 등록&lt;/strong&gt; : 변경된 엔티티가 있으면 그에 해당하는 UPDATE 쿼리를 생성하여 쓰기 지연 SQL 저장소에 등록합니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. 쓰기 지연 SQL 저장소의 쿼리를 DB에 전송&lt;/strong&gt; : 플러시 시점에 쓰기 지연 SQL 저장소에 저장된 등록, 수정, 삭제 쿼리들을 데이터베이스로 전송해 실제로 DB에 반영합니다.&lt;/p&gt;
&lt;h3 id=&quot;플러시를-발생시키는-방법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%94%8C%EB%9F%AC%EC%8B%9C%EB%A5%BC-%EB%B0%9C%EC%83%9D%EC%8B%9C%ED%82%A4%EB%8A%94-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;플러시를 발생시키는 방법 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;플러시를 발생시키는 방법&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;1. em.flush() 호출&lt;/strong&gt; : 영속성 컨텍스트를 수동으로 플러시하고 싶을 때 직접 호출할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 트랜잭션 커밋&lt;/strong&gt; : 트랜잭션이 커밋되는 시점에 JPA가 자동으로 플러시를 실행합니다. 이때 변경 사항들이 DB에 반영됩니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. JPQL 쿼리 실행&lt;/strong&gt; : JPQL을 실행할 때도 자동으로 플러시가 호출됩니다. 이는 JPQL로 조회할 때, 영속성 컨텍스트에 있는 최신 상태의 엔티티가 반영되어야 하기 때문입니다. 예를 들어, em.persist()로 엔티티를 영속성 컨텍스트에 등록한 후, JPQL을 실행하면 DB에 반영된 상태에서 조회를 해야 하므로 플러시가 발생합니다.&lt;/p&gt;
&lt;h3 id=&quot;플러시의-특징&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%94%8C%EB%9F%AC%EC%8B%9C%EC%9D%98-%ED%8A%B9%EC%A7%95&quot; aria-label=&quot;플러시의 특징 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;플러시의 특징&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;1. 영속성 컨텍스트를 비우지 않음&lt;/strong&gt; : 플러시는 단순히 변경 내용을 DB에 동기화할 뿐, 영속성 컨텍스트 자체를 비우지는 않습니다. 즉, 플러시 이후에도 영속성 컨텍스트는 유지됩니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 트랜잭션과의 관계&lt;/strong&gt; : 트랜잭션의 작업 단위가 중요하며, DB와의 동기화는 보통 커밋 직전에만 일어나면 충분합니다. 이는 트랜잭션의 일관성을 유지하기 위해 중요한 메커니즘입니다.&lt;/p&gt;
&lt;h2 id=&quot;그렇다면-ID로-다시-조회해야-할까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B7%B8%EB%A0%87%EB%8B%A4%EB%A9%B4-ID%EB%A1%9C-%EB%8B%A4%EC%8B%9C-%EC%A1%B0%ED%9A%8C%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C&quot; aria-label=&quot;그렇다면 ID로 다시 조회해야 할까 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;그렇다면 ID로 다시 조회해야 할까?&lt;/h2&gt;
&lt;p&gt;영속성 컨텍스트는 트랜잭션 내에서 동일한 엔티티의 동일성을 보장하지만, 트랜잭션 범위 밖에서는 보장되지 않기 때문에 ID로 다시 조회해야 합니다. 트랜잭션이 종료되면 영속성 컨텍스트는 더 이상 엔티티를 관리하지 않기 때문에 새로운 트랜잭션 내에서 엔티티를 조회할 필요가 있습니다.&lt;/p&gt;
&lt;h2 id=&quot;마치며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%EC%B9%98%EB%A9%B0&quot; aria-label=&quot;마치며 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;마치며&lt;/h2&gt;
&lt;p&gt;저랑 비슷한 궁금증이 있으셨던 분들이 이 글을 통해 도움이 되셨으면 좋겠습니다. 읽어주셔서 감사드리고, 잘못된 부분이 있으면 댓글 남겨주세요.&lt;/p&gt;
&lt;p&gt;reference : &lt;a href=&quot;https://www.inflearn.com/course/lecture?courseSlug=ORM-JPA-Basic&quot;&gt;https://www.inflearn.com/course/lecture?courseSlug=ORM-JPA-Basic&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[예측모델 기반 face detection 웹서비스 구현]]></title><description><![CDATA[이 글은 구름톤 유니브에서 들은 강의를 정리한 내용입니다. 이미지를 업로드하고, opencv를 사용하여 이미지에서 얼굴을 탐지하는 웹 서비스를 만들어보겠습니다. 이미지 DB…]]></description><link>https://joungeun0825.github.io/groomthon_study/</link><guid isPermaLink="false">https://joungeun0825.github.io/groomthon_study/</guid><pubDate>Thu, 03 Oct 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이 글은 구름톤 유니브에서 들은 강의를 정리한 내용입니다. 이미지를 업로드하고, opencv를 사용하여 이미지에서 얼굴을 탐지하는 웹 서비스를 만들어보겠습니다.&lt;/p&gt;
&lt;h2 id=&quot;이미지-DB에-저장하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B4%EB%AF%B8%EC%A7%80-DB%EC%97%90-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0&quot; aria-label=&quot;이미지 DB에 저장하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;이미지 DB에 저장하기&lt;/h2&gt;
&lt;p&gt;이미지 업로드 기능을 처리할 수 있는 모델을 정의한 코드입니다. 이 모델은 사용자가 업로드한 이미지 파일과 그에 대한 메타데이터(설명, 업로드된 시간)를 관리합니다. Django의 ORM을 통해 데이터베이스에 매핑되며, 이를 사용해 이미지와 관련된 데이터를 저장하고 관리할 수 있습니다. 코드의 각 부분을 자세히 설명해보겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ImageUploadModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    document &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ImageField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;upload_to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;images/%Y/%m/%d&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    uploaded_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now_add&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;description-필드&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#description-%ED%95%84%EB%93%9C&quot; aria-label=&quot;description 필드 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;description 필드&lt;/h3&gt;
&lt;p&gt;이 필드는 업로드된 이미지에 대한 설명을 저장하는 텍스트 필드입니다. 이 필드의 최대 길이는 255자로 제한합니다. 폼에서 이 필드를 빈 채로 제출하는 것을 허용하여 사용자가 설명을 생략해도 오류가 발생하지 않으며, is_valid() 함수에서 유효한 데이터로 간주됩니다.&lt;/p&gt;
&lt;h3 id=&quot;document-필드&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#document-%ED%95%84%EB%93%9C&quot; aria-label=&quot;document 필드 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;document 필드&lt;/h3&gt;
&lt;p&gt;실제 이미지 파일을 저장하는 필드입니다. Django의 이미지 전용 필드로, 이미지 업로드를 다룰 때 사용합니다. 파일이 저장될 경로를 지정합니다. 여기서 %Y, %m, %d는 각각 업로드 시점의 연도, 월, 일을 나타냅니다. 예를 들어, 2024년 10월 3일에 업로드된 파일은 /images/2024/10/03/ 폴더 아래에 저장됩니다.&lt;/p&gt;
&lt;h3 id=&quot;uploaded_at-필드&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#uploaded_at-%ED%95%84%EB%93%9C&quot; aria-label=&quot;uploaded_at 필드 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;uploaded_at 필드&lt;/h3&gt;
&lt;p&gt;파일이 업로드된 시간을 저장하는 필드입니다. 객체가 처음 생성될 때 현재 날짜와 시간이 자동으로 저장됩니다. 이후에는 수정되지 않습니다.&lt;/p&gt;
&lt;h2 id=&quot;폼으로-사용자에게-받은-데이터-처리하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%8F%BC%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%EC%9E%90%EC%97%90%EA%B2%8C-%EB%B0%9B%EC%9D%80-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0&quot; aria-label=&quot;폼으로 사용자에게 받은 데이터 처리하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;폼으로 사용자에게 받은 데이터 처리하기&lt;/h2&gt;
&lt;p&gt;이 코드는 Django의 폼을 정의한 것으로, 사용자로부터 데이터를 입력받아 처리하는 방식입니다. 여기서는 두 가지 폼을 다룹니다: SimpleUploadForm과 ImageUploadForm. 각각의 폼이 어떤 역할을 하는지 살펴보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;SimpleUploadForm&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#SimpleUploadForm&quot; aria-label=&quot;SimpleUploadForm permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;SimpleUploadForm&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleUploadForm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;forms&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Form&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; forms&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; forms&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ImageField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SimpleUploadForm&lt;/strong&gt;은 forms.Form 클래스를 상속받아 직접 정의한 폼입니다. 이 폼은 이미지를 업로드하는 가장 기본적인 기능을 구현합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;필드 설명&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;title = forms.CharField(max_length=50): 최대 50자까지 입력 가능한 텍스트 필드입니다. 사용자가 업로드한 이미지의 제목을 입력할 수 있습니다.&lt;/li&gt;
&lt;li&gt;image = forms.ImageField(): 이미지를 업로드할 수 있는 필드입니다. ImageField는 FileField를 상속받아, 이미지 파일인지 확인하는 추가 유효성 검사를 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 폼은 간단한 이미지 업로드와 제목 입력 기능을 제공하는데, 폼 필드가 고정되어 있어 어떤 모델에도 종속되지 않습니다. 따라서 데이터를 모델에 직접 연결하지 않는 경우에 주로 사용됩니다.&lt;/p&gt;
&lt;h3 id=&quot;ImageUploadForm&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#ImageUploadForm&quot; aria-label=&quot;ImageUploadForm permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ImageUploadForm&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ImageUploadForm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;forms&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelForm&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ImageUploadModel
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;description&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;document&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ImageUploadForm&lt;/strong&gt;은 forms.ModelForm을 상속받아 모델과 연결된 폼을 생성합니다. 이 폼은 데이터베이스 모델인 ImageUploadModel과 직접 연결되어 있어, 사용자가 입력한 데이터가 바로 모델의 필드에 매핑됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;메타 데이터&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;model = ImageUploadModel: 이 폼이 연결된 모델을 명시합니다. ImageUploadModel은 업로드된 이미지와 설명을 저장하는 모델입니다.&lt;/li&gt;
&lt;li&gt;fields = (&apos;description&apos;, &apos;document&apos;, ): 사용자가 입력할 수 있는 필드 목록입니다. description과 document만을 입력받고, uploaded_at 필드는 자동으로 설정되므로 입력받지 않습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;이미지에-Face-detection-적용하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B4%EB%AF%B8%EC%A7%80%EC%97%90-Face-detection-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0&quot; aria-label=&quot;이미지에 Face detection 적용하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;이미지에 Face detection 적용하기&lt;/h2&gt;
&lt;p&gt;아래 코드를 통해 본격적으로 이미지에서 얼굴과 눈을 탐지하게 됩니다. OpenCV에서 제공하는 Haar Cascade Classifier를 사용하여 구현하게 됩니다. 코드를 자세히 알아보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;기본적인-이미지-처리&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9D%B8-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B2%98%EB%A6%AC&quot; aria-label=&quot;기본적인 이미지 처리 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;기본적인 이미지 처리&lt;/h3&gt;
&lt;p&gt;먼저, 이미지를 받아와서 얼굴과 눈을 탐지하는 과정이 필요하겠죠? 이를 위해 이미지 파일을 cv2.imread()를 사용해 읽어옵니다. OpenCV는 이미지를 NumPy 배열 형태로 다루기 때문에, 이미지가 정상적으로 로드됐는지 확인하는 것이 중요합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;img &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imread&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ndarray&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드에서는 이미지를 성공적으로 로드했을 때, 그 이미지의 크기(가로, 세로, 채널)를 출력합니다. 이제 이미지가 너무 클 경우를 대비해 크기를 조정하는 과정을 추가해 보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;이미지-크기-조정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%81%AC%EA%B8%B0-%EC%A1%B0%EC%A0%95&quot; aria-label=&quot;이미지 크기 조정 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;이미지 크기 조정&lt;/h3&gt;
&lt;p&gt;이미지의 가로가 640px보다 크거나, 세로가 480px보다 크면 크기를 축소해줍니다. 이렇게 하면 너무 큰 이미지로 인해 처리 속도가 느려지는 것을 방지할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;resize_needed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;640&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 
    resize_needed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;
    new_w &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;640.0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    new_h &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;640.0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;elif&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;480&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    resize_needed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;
    new_w &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;480.0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    new_h &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;480.0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; resize_needed&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    img &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resize&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;new_w&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;new_h&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 resize_needed 플래그를 사용해 이미지 크기 조정이 필요한 경우에만 리사이즈를 진행합니다. 가로 또는 세로가 기준보다 크면, 해당 비율에 맞게 크기를 줄입니다.&lt;/p&gt;
&lt;h3 id=&quot;얼굴과-눈-탐지&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%96%BC%EA%B5%B4%EA%B3%BC-%EB%88%88-%ED%83%90%EC%A7%80&quot; aria-label=&quot;얼굴과 눈 탐지 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;얼굴과 눈 탐지&lt;/h3&gt;
&lt;p&gt;이제 본격적으로 얼굴과 눈을 탐지해볼 차례입니다. OpenCV에서 제공하는 Haar Cascade Classifier를 사용해 얼굴과 눈을 탐지할 수 있는데요, 미리 학습된 모델을 활용하여 빠르게 얼굴과 눈을 찾을 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;face_cascade &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CascadeClassifier&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;baseUrl &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;haarcascade_frontalface_default.xml&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
eye_cascade &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CascadeClassifier&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;baseUrl &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;haarcascade_eye.xml&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
gray &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cvtColor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;COLOR_BGR2GRAY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
faces &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; face_cascade&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;detectMultiScale&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gray&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;먼저, 이미지를 그레이스케일로 변환한 후 얼굴을 탐지합니다. 여기서 detectMultiScale() 함수는 얼굴을 찾기 위한 주요 함수입니다. 탐지된 얼굴의 좌표를 바탕으로 사각형을 그려주는 작업도 같이 진행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; h&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; faces&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rectangle&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;h&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    roi_gray &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gray&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;y&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;h&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;x&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    roi_color &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;y&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;h&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;x&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    eyes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; eye_cascade&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;detectMultiScale&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;roi_gray&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ex&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ey&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ew&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; eh&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; eyes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rectangle&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;roi_color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ex&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ex&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;ew&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ey&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;eh&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;얼굴을 찾은 후에는 그 영역을 기반으로 다시 눈을 탐지합니다. 얼굴 영역 내에서 눈을 찾고, 해당 부분에도 사각형을 그려줍니다. 얼굴은 파란색 사각형으로, 눈은 녹색 사각형으로 표시됩니다.&lt;/p&gt;
&lt;h3 id=&quot;결과-이미지-저장&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B2%B0%EA%B3%BC-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%A0%80%EC%9E%A5&quot; aria-label=&quot;결과 이미지 저장 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;결과 이미지 저장&lt;/h3&gt;
&lt;p&gt;얼굴과 눈을 찾았으면 이제 그 결과를 이미지 파일로 저장해야겠죠? 이를 위해 cv2.imwrite() 함수를 사용해 원본 파일 경로에 덮어쓰거나, 새로운 파일을 생성해 저장할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imwrite&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 얼굴과 눈이 탐지된 이미지가 저장됩니다.&lt;/p&gt;
&lt;h2 id=&quot;화면-구성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%99%94%EB%A9%B4-%EA%B5%AC%EC%84%B1&quot; aria-label=&quot;화면 구성 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;화면 구성&lt;/h2&gt;
&lt;p&gt;먼저 화면을 구성하는 코드를 알아보겠습니다. 간단히 &lt;strong&gt;이미지를 간단히 업로드하는 기능, 얼굴 탐지 기능&lt;/strong&gt;으로 나눠져 있는데요. 아래에서 더 자세히 알아보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;간단한-이미지-업로드&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%93%9C&quot; aria-label=&quot;간단한 이미지 업로드 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;간단한 이미지 업로드&lt;/h3&gt;
&lt;p&gt;다음은 이미지를 간단히 업로드하는 기능입니다. 이 뷰는 GET 요청일 때는 빈 폼을 보여주고, POST 요청일 때는 사용자가 업로드한 이미지를 처리합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/30868430e00f825c56a5ca65ac7c926f/994d6/image-1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 87.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABJ0AAASdAHeZh94AAAENklEQVR42p2Ua0yTVxiAGxPFkBnxvikDnYCiWDYZ6rQqiCg4r0CQDdSgG8woSMwUN4PLNqcYIzIilM2pIEMZM7MK46og6BQ0EMhaKAiVCSgUuVS3Ukrh2WnL9md/yE7y5vu+nDfPeb9z3vNIAgICCAoMJDAwiC1bA9i8eSsbNmzE3xz+G1nttYaVK71GHZLmpiaaRGg0GjTNzbS0tPDkiYbGxkbU6gZ6e3sZGBjAYDCMKiTq+npUKhXNAlgv3ltb2ywwpVIpwC0C2Id5DA8PM5oh6evrQ6fT0d+vxyCiX69nyGSyTA4NDf0LM5kGMYpKjcYBy3PQaGRw0GjJNef9kyvp7e6mp6eHblGJXj/AKwE1T462ov9UWFZVSWnxHRofFvGgLIOWvFs8VyvRGw0UFd6mQ9PCq1ddlBfncT4pCXlSAsmJCeTnXKesWIHybok4AzV/dHVagem3FRRmZ1BQdIXUjwK4FOZHcvx2Uk7F8HNqOv26XjpetJIQe5jti5xJ2ruRuG2ebFm7hIjdvnz/TSRXryRQrKy2AvMelVNcnUtuWgbKr+SkJX7AiRgPkg/6UpD1LbqXWnTaLipu/ErW/hDa0w5ScXoHvjI3jh7axckv9pCQGsvdxt+twF8ellKQdoGmsxkMdnWTkXCa72IDiAmRIXWZxYqlizkR+xnvrZCxzN2NylMRHA2SIRljwxxHe344E8Glq4ncqa+1AnPKiqk6nkJ7vYp8UcXJI19Tp1Dg/qYDs2e+znS7CUyeNJFx48bzxiwHYvftxc/Hh7E2tthNmiL29QjZN+SUqGqswKyiXOpKy0g/d55dQeE8Fv14X3GTEM+FHAheS5jPEuxnTGPqlGm42M9g0gRb5s6azvSpkxkjFomK/JCLl7+ktG4EeLHoJh/vjODMoaPEhIewdZ0XUncp56KD+TP3FLeP72CV52IWzXdhldQF/6VS/N92Ysk8B8aOt0XmMYfM7HjKG1RWYFqBQtzfYEK9vQhduQA/9zk4O8wk9pM93IoLJXrTcrxXeeM025EjwV7U/nSS31I/Jer9ZUgkEqSujly+lszdhpFDuV5Ryv2cPH78/ACZ8ftoypMTF76J9Wt8OBgZyRqZDM93FmMnfjl6nZSe7GNoc+KoKcgkXS5n/XIPdu4Pp/KJeqRtqu/x4JqClH276SiMx/Qgnehtq5nnNI/1Xt64uboy1/EtbGxfY39YGIqobVRdOIbJoBd3c5jexw2kyBMpqRvpw+zyQjb7+eDs/C6HdwVxJiqIhS6OuIo9m+/sxIL5C3B3kzLRbjI3MrNoLb9HQ34B2ppa+tqfYRIeUIkeLFFVWYHtnc9R1impVzdS+aiN8nsaqqqfUlvTxtOn7Wi1Wjo7Omhta7OIwyINIQaTUJVZDOY7PyC+DUIaFmBnWw8vnul42fMXZmEIqTAoZCNy+D9++BsfTyMPXK0wYAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 1&apos; title=&apos;&apos; src=&apos;/static/30868430e00f825c56a5ca65ac7c926f/ca1dc/image-1.png&apos; srcset=&apos;/static/30868430e00f825c56a5ca65ac7c926f/e7570/image-1.png 170w,
/static/30868430e00f825c56a5ca65ac7c926f/f46e7/image-1.png 340w,
/static/30868430e00f825c56a5ca65ac7c926f/ca1dc/image-1.png 680w,
/static/30868430e00f825c56a5ca65ac7c926f/02d09/image-1.png 1020w,
/static/30868430e00f825c56a5ca65ac7c926f/994d6/image-1.png 1093w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;simple_upload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;POST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SimpleUploadForm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;POST&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILES&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        myfile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILES&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;image&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        fs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FileSystemStorage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        filename &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;myfile&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; myfile&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        uploaded_file_url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;form&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;uploaded_file_url&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; uploaded_file_url&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; render&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;opencv_webapp/simple_upload.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SimpleUploadForm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;form&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; render&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;opencv_webapp/simple_upload.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;얼굴-탐지-기능&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%96%BC%EA%B5%B4-%ED%83%90%EC%A7%80-%EA%B8%B0%EB%8A%A5&quot; aria-label=&quot;얼굴 탐지 기능 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;얼굴 탐지 기능&lt;/h3&gt;
&lt;p&gt;얼굴 탐지는 업로드한 이미지에서 얼굴을 찾아주는 기능입니다. 여기서는 사용자가 이미지를 업로드한 후, 그 이미지를 분석해 얼굴을 탐지하는 과정을 구현합니다.
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/870c7c09684f0e71e4a2e33ee859d0cc/3e3fe/image-2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABJ0AAASdAHeZh94AAAET0lEQVR42pWUC0xTdxjFmyCb8zUd84FgHLM8oqj4LvKYCDIcLmZgfc0pECfDMQ2iRGaA+GJGQ2CbU5hCMjckqPPBBME4aIfQByAWCo7opIroLG2hgopA+9ttYcuyLIu7yUn+3//enHu+fOc7osDAQPz9/QkKCmLxYj/mzlvIgoUSZvnMxXumDzO8Z+HpNZ1pYo+Xgqiuro4atZra2jrq6+vRarU0NtrQaIdW20RT08tDZDabMRgMmEwm9Ho9vb299PX12dHf34/Vyv96RJ2mTowmI+bubh4/NtBhMGIQ6o4OPd1Pntg/sgqs1n8wW//lT7Y70a+td7hepaD9t1u03laib2mip+2h8NpCq+4e7br7vOjtoa31NlXlSn4pU3C1+Dqa+mbutGjQNTeif9SO3tw1SHihRs6JnKNUl5wlK0VK4eoI8g5Ecf5MBpn7D6NraKaz+3fOHj/KQrEvqzYHsFrqx/IlK9kSE0r2/jguF37NpdrrWKwWRGU3VZSrfqJIXkRlchaFe9ezd+ccMuIDKM/PsLfS02NGW17FsW2fIctfQ83paNa/t4xdCWtJT40h66vtFN+wEQoKr9xUcq7sLKr0ozytrEdZ8iMZCWFkbg8lLMCDiA+CKcg5zue7kljkHUJFciz5W9cweqQ7bm5TyNwXQ/a3KRQJCu0tl2rVVBw6Ruu5YvQmA6nbU5Dn5bExOAynka6MchzLuNcn4OAwjFdGurDjkyS2fBiH4/A3cXQczr7kKEpKsrlUM6SwSCWn9uJlairkxEijuVRUQvddHasWR7IoZC5Ll/niPGk2Y8aMw83lDVydx+LhNpmJ48chcnBk0wYp35/azwXFNWxzFxXfVJCcksaXu/eSGLuZXfFbeD88nNjICKovxHHuzFqW+PnjOc0dHzdv5ojnME/YHF+vt3lt1GhmuLtwInsHpRoVAxbbUDRKpB9Fs/HdlawLDEbiMZMpTp5IVyRSuudTsqOlvCOJZN6s2UhCfPkmP4bMzDh2rghlxIhXcZ3sxMm8g5Q2DBFeqVdQUHiak0mpJEWtJfdyLFtTl+E7f6WgOIHw4HAk8wOYNNmF0EV+aAtT0RRmcC3nEF+kpTB/uph1UZFcbVQPEWoUtNSpKdhzgNrvDtPf8gO5Bz/GY9oCIsKXC+1K8BSLGT9hIkslIZyJ20RF+laeddy3W8pwq5Ej6WmcV8oGV69MW0N8fAxTJ3qxPmwDuYnbhLYlTBjvxVuuzkx1dcXdTcywYY6k7d6NrvwqNwpOodc00NX2QDDpU9ru3eaiWjY4ZX2nEaVahVxeiaxSjUyu4OeKKuQyFTKZmurqG9TVNlAu3Ola2+wqBp718qKzi4HnvVj6+nn2/DkmwfzCxiMydhgxGk2Yu7qEMHgqhANCMCAEBfbzw4eDtRBEGIw2Y1j5rwASdbSbeaQz8uCuEGH6J4LbB7BY+v+CrbZaBobOFux59if+ljKWofoP9PoZQb7eyykAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 2&apos; title=&apos;&apos; src=&apos;/static/870c7c09684f0e71e4a2e33ee859d0cc/ca1dc/image-2.png&apos; srcset=&apos;/static/870c7c09684f0e71e4a2e33ee859d0cc/e7570/image-2.png 170w,
/static/870c7c09684f0e71e4a2e33ee859d0cc/f46e7/image-2.png 340w,
/static/870c7c09684f0e71e4a2e33ee859d0cc/ca1dc/image-2.png 680w,
/static/870c7c09684f0e71e4a2e33ee859d0cc/3e3fe/image-2.png 860w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;detect_face&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;POST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ImageUploadForm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;POST&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILES&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            post &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;commit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            imageURL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MEDIA_URL &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
            cv_detect_face&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MEDIA_ROOT_URL &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; imageURL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; render&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;opencv_webapp/detect_face.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;form&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;form&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ImageUploadForm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; render&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;opencv_webapp/detect_face.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;form&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;form&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;POST 요청&lt;/strong&gt;: 사용자가 이미지를 업로드하고 나면 ImageUploadForm을 통해 데이터를 검증합니다. 유효한 데이터라면, 이미지 파일을 DB에 저장하고 파일 경로를 얻어온 후, 미리 만들어둔 얼굴 탐지 함수 cv&lt;em&gt;detect&lt;/em&gt;face()를 호출합니다. 이 함수는 이미지에서 얼굴을 감지하고, 그 결과를 이미지에 반영하는 역할을 합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GET 요청&lt;/strong&gt;: 이 경우는 사용자가 처음 접근할 때 빈 폼을 보여줍니다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Jenkins 사용해 CI/CD 파이프라인 자동화하기]]></title><description><![CDATA[지난 글에서는 Google Cloud Platform 인스턴스에 Jenkins 컨테이너를 실행시켰습니다. 이번 글에서는 Jenkins를 세팅하고, 파이프라인을 구성하여 본격적으로 프로젝트를 배포하고 CI/CD를 자동화해보겠습니다. Jenkins…]]></description><link>https://joungeun0825.github.io/deploy2/</link><guid isPermaLink="false">https://joungeun0825.github.io/deploy2/</guid><pubDate>Tue, 01 Oct 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;지난 글에서는 Google Cloud Platform 인스턴스에 Jenkins 컨테이너를 실행시켰습니다. 이번 글에서는 Jenkins를 세팅하고, 파이프라인을 구성하여 본격적으로 프로젝트를 배포하고 CI/CD를 자동화해보겠습니다.&lt;/p&gt;
&lt;h2 id=&quot;Jenkins-세팅&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Jenkins-%EC%84%B8%ED%8C%85&quot; aria-label=&quot;Jenkins 세팅 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Jenkins 세팅&lt;/h2&gt;
&lt;h3 id=&quot;Jenkins-방화벽-규칙-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Jenkins-%EB%B0%A9%ED%99%94%EB%B2%BD-%EA%B7%9C%EC%B9%99-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;Jenkins 방화벽 규칙 설정 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Jenkins 방화벽 규칙 설정&lt;/h3&gt;
&lt;p&gt;Jenkins는 기본적으로 8080 포트를 사용하여 웹 인터페이스를 제공합니다. GCP 인스턴스에서 이 포트에 접근할 수 있도록 방화벽 규칙을 설정해야 합니다.&lt;/p&gt;
&lt;p&gt;GCP 콘솔에 접속하고, 네트워크 서비스 -&gt; VPC 네트워크 -&gt; 방화벽 규칙으로 이동한 후, &apos;방화벽 규칙 만들기&apos;를 클릭하고, 다음과 같이 설정합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/b5ef0e59bb790d8109cfc42f7551818a/663f3/image-1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 126.47058823529413%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABJ0AAASdAHeZh94AAACGElEQVR42q1Va2/qMAzN//9vSFeT+HCRgAHdaLuWNq+GPs9sl64TV9oFRiQ3SZ2c2PGxowrbo6o8/ry8YLVaYbPd4HW7xWKxQH7KcW9T2jhkWYY0TQm4wjAM6LoOTVOj73uZ/yS8hltZloiiCIpB8jyD1hrGaFhrYY2F0QbncxDwn6RtWwFlHMYQQOssKToCOJMiIIQA7z1Z2cjiW4UtVuzq4XAQtxmI27VLtwpbqxr6jHfWyI+u67+59O+mST+PZ10IZyh2jYEmy/phtrD/svI6EHM/63oRNQfESEB4PIqBoXkVqkugzCVYWnpnjewZY+DgQ0NrCXAX5VjvMrwlJTwpONK80NAmDhZvcNQ7nhPwxAT+Zy+AztM+X0M7usOscEg/cvH/GU3t0xYFkTJNE3g67TrK94gAslvH41F4N0aue0i8r+SaFAfgGMeo6/pu3n3nX0wYW6oBKlB26FLLCU3T3i01S83j0VKVn06S1Jx2E2Hvs66DrQa8H2OqVn8pUyhDHNFFuEX3qIkKeZ6T1aUccuu9stuSet6WsjlOUuz2e4nUdPpDtDnEliw6SXFIkuSLNg/zMEosMgJks59C7HPlhINMG5ZfA6bZiQjpEL1FWC6XvwfcvAfKlFjq4VNcZspoqiBt0z4HcKqFzCHmXV03cpftpZLfykF+PriUKX7+uDgwmVmKohAKMfj/Ks/0MDEoY6zXa3wCna+oLxE5AScAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 1&apos; title=&apos;&apos; src=&apos;/static/b5ef0e59bb790d8109cfc42f7551818a/663f3/image-1.png&apos; srcset=&apos;/static/b5ef0e59bb790d8109cfc42f7551818a/e7570/image-1.png 170w,
/static/b5ef0e59bb790d8109cfc42f7551818a/f46e7/image-1.png 340w,
/static/b5ef0e59bb790d8109cfc42f7551818a/663f3/image-1.png 650w&apos; sizes=&apos;(max-width: 650px) 100vw, 650px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/ad1ace5f5ae80a1be2125d08a87307eb/7190f/image-2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 82.3529411764706%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABJ0AAASdAHeZh94AAABQ0lEQVR42p2T3W6EIBCFef8H6/VeNHvTbLtu4vrTFRQUBcTTGRqb3gLJiUbk88yZUahxRHW/4zUMOI4Dcd8RY8yS9x51XaN6PCCcD3DOIdBD3gwELJFdV1i7Qmitcb1ecblccLvdEELIErvjygaqsG1biGVZ0DRNsvx8PtMLucDIQCnRdR3EPM+YZwMGr2Sby96phFwx2NMHREvUvutTjtvmaDNmyzmPqnqkyETqbDyKnZ06Oy5GGhvOzlqLnbtMtvmaJQIaio4bLKRSYCg7PVWS398cTkTllo96AufJOeQONus0I/SkUrtZSo2QBC9dCVg1Bn3/C5RSUQ4GUkk4KqNkicEckNOSAuWZNMake0+/ZBFw8wfe3jUUTTqZ/l9AkQQf/axqfHw10CsgTSjWbP0vUE0a3WvEt9LQi8Oy7UXa3I4f9bHjAR69dg0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 2&apos; title=&apos;&apos; src=&apos;/static/ad1ace5f5ae80a1be2125d08a87307eb/ca1dc/image-2.png&apos; srcset=&apos;/static/ad1ace5f5ae80a1be2125d08a87307eb/e7570/image-2.png 170w,
/static/ad1ace5f5ae80a1be2125d08a87307eb/f46e7/image-2.png 340w,
/static/ad1ace5f5ae80a1be2125d08a87307eb/ca1dc/image-2.png 680w,
/static/ad1ace5f5ae80a1be2125d08a87307eb/7190f/image-2.png 815w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;Jenkins-초기-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Jenkins-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;Jenkins 초기 설정 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Jenkins 초기 설정&lt;/h3&gt;
&lt;p&gt;아래 명령어로 초기 관리자 비밀번호를 확인합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /var/lib/jenkins/secrets/initialAdminPassword&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;[GCP public ip]:8080 으로 Jenkins에 접속하여 초기 관리자 비밀번호를 입력합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/403c1ae239b77a395689aec844045507/ee2d9/image-3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 69.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAABS0lEQVR42s1TW07DMBDM+TkEN+CfMyDx3SKgpbSF0NrxK341TYa1aUqrRiJIfGBpNLvO7mgztovF4hXle4myLGGthXPuyH08Bt57CCFQcM7RNE1uDiEixl3OE8cY0bYtuq7L+Gkl0UJKmZuWyzWm0wfMZnOs12+YTKZ4enwG51UuPhXt49P8KKi1zokyBpWQENpQbMGlhiRWKacapRSkVMQGxtQHO77tuRB0uoapJKy2MNqhVg5GkT9CoaZ9Z5MlITenPxqa9Eww0CRRGoRKIZBIIBHPxRdob0f+Jm97f4c8PRPcMI6PLctcOw9PTZ4OpYej4jSlo28Jp4c1OGHT7LHfE4jbtssNF+i6I+faA9LUF4JjrsWoa/MvBftO11/stJIXg76NxJ9OmA7phXnMS4litVrlR80YQ3rXvwEjVFWFcrPF1c0drm/v8QnYj0TQszIm2wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 3&apos; title=&apos;&apos; src=&apos;/static/403c1ae239b77a395689aec844045507/ca1dc/image-3.png&apos; srcset=&apos;/static/403c1ae239b77a395689aec844045507/e7570/image-3.png 170w,
/static/403c1ae239b77a395689aec844045507/f46e7/image-3.png 340w,
/static/403c1ae239b77a395689aec844045507/ca1dc/image-3.png 680w,
/static/403c1ae239b77a395689aec844045507/02d09/image-3.png 1020w,
/static/403c1ae239b77a395689aec844045507/ee2d9/image-3.png 1196w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;추천 플러그인을 설치하여 Jenkins 설정을 완료합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/238739dd432e01eee1ca4bc62d63e07d/98b00/image-4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAABkklEQVR42q2T626jMBCF8/6vss+xTbVZqdFWSsvmBom4pJDYXGyMgZyOp6SKFJof3bX0MdjMHM+Mhsl+v0cUxkiSBEopaK2Z6/fL/h51XSPLMkzyPEfbtjDGwFr7Sdd1bJum4e/31vl8ZltVFSbu0fU9/GCHxeIVy+WabRDs4XlLvLx4WK02aEjcBfbk63AXOnsR+xR06brFJQ5lmlpTCRpVWUGR00dJhqtwaF1zsFKa96OCsrY4qgZZZRDnGkI3KG0PZVvuT0V+ktpT0iWG2mDpvKUsb0q+CM78A378esV0k+CR8NISobJItcVfz8NsNsPW9xGGIYmWnKUT/lJwdSyxeCuwFgq7wmAjNJZEVGhIIXA6CQ4oioLJ8wL1UO6o4J9Y4Cdl+UBM/TfmcZfBP5VI4gg+ZbfdbtkGQYAoirjfN4J6EHw+SDwlEvNDjvlgf8cS6zTHkeYrTdMrMp7baogdzbBpO5gRbNfTHHZXtIy1H2PzpeC/rFFBd/gd7gr+lwzDMOKfWogTpJTfxo1SHMd4B3VLOigJDzWVAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 4&apos; title=&apos;&apos; src=&apos;/static/238739dd432e01eee1ca4bc62d63e07d/ca1dc/image-4.png&apos; srcset=&apos;/static/238739dd432e01eee1ca4bc62d63e07d/e7570/image-4.png 170w,
/static/238739dd432e01eee1ca4bc62d63e07d/f46e7/image-4.png 340w,
/static/238739dd432e01eee1ca4bc62d63e07d/ca1dc/image-4.png 680w,
/static/238739dd432e01eee1ca4bc62d63e07d/02d09/image-4.png 1020w,
/static/238739dd432e01eee1ca4bc62d63e07d/98b00/image-4.png 1202w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;파이프라인-구성하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0&quot; aria-label=&quot;파이프라인 구성하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;파이프라인 구성하기&lt;/h2&gt;
&lt;p&gt;이제 Jenkins에서 새로운 Item을 누르고, 파이프라인을 구성해보겠습니다. 저번 글에서 배포과정을 3단계로 나눴던 것처럼 &lt;strong&gt;파이프라인도 git clone, build, docker build &amp;#x26; run으로 구성&lt;/strong&gt;해보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/292ebc4e95c01359d6eedee9d0c7e10d/6a350/image-5.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 40.588235294117645%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAABH0lEQVR42o2RSW7DMAxFdf+j9QBFisCO2zoeNMuSh9qLX1KIgibIoosHUqJIfopiHEfUdYWmaVBVFbTWiDFimqY7MU4P51eEEJBSghiURjso9FLjSnbUDtL4B3pp4Xz4X8GvbsS5afFNxQYT0EmHKxUodMri0iloYykx5MRXeO/zZCJMCQMlGUow1sFTMKYZU0xEzETqvKwLluWJdcX8dCdkd8H5/Q1V3eDjdELbtvSPihoYOOcy1lpIKaGUyj7H2GdYGZ/571dqIOYU4Z2hBHVP5uA8z/jZNmzESrCa9cbyh/sdqeN3QrqIz17RpuvcqfwHF8+WGhSlTFlAWQYvgi0LOI4DYt93HEQZg9WV8cpdsVwwK76p2soEN3/fD/wC8Yhgqe/gyfUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image 5&apos; title=&apos;&apos; src=&apos;/static/292ebc4e95c01359d6eedee9d0c7e10d/ca1dc/image-5.png&apos; srcset=&apos;/static/292ebc4e95c01359d6eedee9d0c7e10d/e7570/image-5.png 170w,
/static/292ebc4e95c01359d6eedee9d0c7e10d/f46e7/image-5.png 340w,
/static/292ebc4e95c01359d6eedee9d0c7e10d/ca1dc/image-5.png 680w,
/static/292ebc4e95c01359d6eedee9d0c7e10d/6a350/image-5.png 832w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pipeline &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    agent any
    stages &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        stage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Github&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; branch: &lt;span class=&quot;token string&quot;&gt;&apos;develop&apos;&lt;/span&gt;, url: &lt;span class=&quot;token string&quot;&gt;&apos;https://github.com/where-wear/where-wear-backend.git&apos;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        stage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Build&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;chmod +x gradlew&apos;&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./gradlew bootJar --debug&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        stage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Docker Build &amp;amp; Run&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                script &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    // Docker 이미지 이름 설정
                    def imageName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;wherewear-backend:latest&quot;&lt;/span&gt;
                    
                    // Docker 이미지를 빌드
                    &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;docker build -t &lt;span class=&quot;token variable&quot;&gt;${imageName}&lt;/span&gt; .&quot;&lt;/span&gt;
                    
                    // 기존 컨테이너 중지하고 제거
                    &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;docker stop wherewear-backend&quot;&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;docker rm wherewear-backend&quot;&lt;/span&gt;
                    
                    // Docker 컨테이너를 새로 실행
                    &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;docker run -d --name wherewear-backend -p 8081:8080 &lt;span class=&quot;token variable&quot;&gt;${imageName}&lt;/span&gt;&quot;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Google Cloud Platform에서 Jenkins 도커 컨테이너 실행하기]]></title><description><![CDATA[이번 글에서는 Docker와 Jenkins를 사용해 배포한 과정에 대해서 이야기해보려고 합니다.  Jenkins 없이 배포했다면 어땠을까? 일단 주요 배포과정을 단순하게 아래 3단계로 나누어 생각해 보겠습니다. 먼저 GCP…]]></description><link>https://joungeun0825.github.io/deploy/</link><guid isPermaLink="false">https://joungeun0825.github.io/deploy/</guid><pubDate>Sat, 28 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이번 글에서는 Docker와 Jenkins를 사용해 배포한 과정에 대해서 이야기해보려고 합니다. &lt;/p&gt;
&lt;h2 id=&quot;Jenkins-없이-배포했다면-어땠을까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Jenkins-%EC%97%86%EC%9D%B4-%EB%B0%B0%ED%8F%AC%ED%96%88%EB%8B%A4%EB%A9%B4-%EC%96%B4%EB%95%A0%EC%9D%84%EA%B9%8C&quot; aria-label=&quot;Jenkins 없이 배포했다면 어땠을까 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Jenkins 없이 배포했다면 어땠을까?&lt;/h2&gt;
&lt;p&gt;일단 주요 배포과정을 단순하게 아래 3단계로 나누어 생각해 보겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 GCP 인스턴스에서 &lt;strong&gt;프로젝트 github repository를 clone&lt;/strong&gt; 하여야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/where-wear/where-wear-backend.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음으로는 &lt;strong&gt;프로젝트를 빌드&lt;/strong&gt;해야 합니다. 프로젝트 빌드는 Gradle Wrapper로 할 수 있습니다. Gradle Wrapper를 실행하는 명령어인 gradlew에 실행 권한을 부여하고, 빌드 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; +x gradlew
./gradlew bootJar &lt;span class=&quot;token parameter variable&quot;&gt;--debug&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러면 Java 애플리케이션, 라이브러리 및 관련 리소스가 압축된 &lt;strong&gt;JAR파일이 생성&lt;/strong&gt;됩니다. 이 JAR파일을 실행하여 &lt;strong&gt;애플리케이션을 실행&lt;/strong&gt;시킵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; wherewear-0.0.1-SNAPSHOT.jar&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;성공적으로 배포가 완료 되었습니다. 하지만, 이후에 프로젝트 코드가 수정되고 메인 브랜치에 병합된다면, 위 과정을 또 반복해야 할겁니다. 이런 &lt;strong&gt;수고스러운 과정을 없애기 위해서 Jenkins를 사용하여 CI(지속적 통합)/CD(지속적 배포) 과정을 자동화&lt;/strong&gt; 해보겠습니다.&lt;/p&gt;
&lt;h2 id=&quot;Jenkins를-사용한-CICD-자동화&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Jenkins%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-CICD-%EC%9E%90%EB%8F%99%ED%99%94&quot; aria-label=&quot;Jenkins를 사용한 CICD 자동화 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Jenkins를 사용한 CI/CD 자동화&lt;/h2&gt;
&lt;p&gt;이제 CI/CD 과정을 자동화 해보겠습니다. 먼저 GCP 인스턴스에 &lt;strong&gt;Jenkins를 설치&lt;/strong&gt;해야 합니다. Jenkins는 스프링부트 애플리케이션과 격리된 환경에서 실행하기 위해서 GCP 인스턴스에 Jenkins를 직접 설치하지 않고, &lt;strong&gt;Jenkins 도커 컨테이너를 만드는 방법&lt;/strong&gt;을 사용하겠습니다. 그러면 결국 &lt;strong&gt;GCP 인스턴스에는 Jenkins 컨테이너와 애플리케이션 컨테이너 두 대가 띄워지게 됩니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;생각해봐야 할 부분이 있습니다. Jenkins가 프로젝트를 빌드하고 애플리케이션 컨테이너를 띄우게 되는데, 그러면 Jenkins가 Docker를 사용하려면 Jenkins 안에 Docker를 설치해야 할까요? 하지만 이 방법(Docker-in-Docker)을 사용한다면 컨테이너 내에서 루트 권한으로 실행되기 때문에 보안 리스크가 증가 합니다. 그래서 그 대신, Jenkins가 호스트의 Docker를 제어할 수 있는 방법을 사용할 것입니다. 따라서, GCP 인스턴스 소켓을 Jenkins 컨테이너 안에 마운트 하여 Docker-out-Docker 방법을 사용하도록 하겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;Docker-설치&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Docker-%EC%84%A4%EC%B9%98&quot; aria-label=&quot;Docker 설치 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Docker 설치&lt;/h3&gt;
&lt;p&gt;도커 컨테이너를 만들기 위해서는 GCP 인스턴스에 Docker를 설치해야합니다. 아래 방법으로 Docker를 설치할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;패키지 업데이트&lt;/strong&gt;&lt;br&gt;
아래 명령어로 Docker의 GPG 키를 추가하고 Docker 패키지를 설치하는 데 필요한 환경을 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; update
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    ca-certificates &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    gnupg &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    lsb-release&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Docker의 공식 GPG 키 추가&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; /etc/apt/keyrings
$ &lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-fsSL&lt;/span&gt; https://download.docker.com/linux/ubuntu/gpg &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; gpg &lt;span class=&quot;token parameter variable&quot;&gt;--dearmor&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; /etc/apt/keyrings/docker.gpg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Docker 저장소 설정&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;deb [arch=&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;dpkg --print-architecture&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;lsb_release &lt;span class=&quot;token parameter variable&quot;&gt;-cs&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt; stable&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tee&lt;/span&gt; /etc/apt/sources.list.d/docker.list &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/null&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Docker 엔진 설치&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; update
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; docker-ce docker-ce-cli containerd.io docker-compose-plugin&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Docker 버전 확인&lt;/strong&gt;&lt;br&gt;
Docker가 정상적으로 설치되었는지 버전을 확인합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; --version​&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;Jenkins-컨테이너-실행하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Jenkins-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0&quot; aria-label=&quot;Jenkins 컨테이너 실행하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Jenkins 컨테이너 실행하기&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Jenkins 이미지 다운로드&lt;/strong&gt;&lt;br&gt;
아래 명령어로 Jenkins 이미지를 다운 받습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; pull jenkins/jenkins:lts&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Docker 소켓 마운트 하여 Jenkins 컨테이너 실행&lt;/strong&gt;&lt;br&gt;
Jenkins가 GCP 인스턴스의 Docker를 사용할 수 있도록 Docker 소켓을 마운트하여 Jenkins 컨테이너를 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; my-jenkins &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8080&lt;/span&gt;:8080 &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-v&lt;/span&gt; jenkins_home:/var/jenkins_home &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Jenkins 데이터 저장을 위한 볼륨&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-v&lt;/span&gt; /var/run/docker.sock:/var/run/docker.sock &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Docker 소켓 마운트&lt;/span&gt;
  jenkins/jenkins:lts  &lt;span class=&quot;token comment&quot;&gt;# Jenkins 이미지 사용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;끝으로&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EC%9C%BC%EB%A1%9C&quot; aria-label=&quot;끝으로 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;끝으로&lt;/h2&gt;
&lt;p&gt;이렇게 Google Cloud Platform 인스턴스에 Jenkins 컨테이너 실행을 성공시켰습니다. 다음 포스팅에서는 Jenkins를 세팅하고, 파이프라인을 구성해보도록 하겠습니다.&lt;/p&gt;</content:encoded></item></channel></rss>